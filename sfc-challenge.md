## 서비스 체인 구성, SFC 경로 선택 및 서비스 기능 배치
SFC 구성 문제는 SF 배치 및 경로 선택 문제와 직결된다.
이러한 세 가지 문제는 서비스 체인을 정의하고 최적의 SFC 경로 및 SF를 선택하는 데 기여한다.
서비스 체인 전개 프로세스는 서로 다른 교환 가능한 단계에서 달성될 수 있다.
다양한 알고리즘이 체인 그래프를 계산하여 최적의 경로를 찾고 그에 따라 SF를 배치할 수 있다.

1) 첫째, SFC 구성 문제는 설계 시간 동안 정의된 추상 계층에서 구체적인 SF 집합으로 SFC를 변환하는 데 수반되는 작업을 의미한다(그림 4(a)).
SFC 구성의 목표는 구현 세부사항에 대한 걱정 없이 복잡한 서비스를 구현하기 위해 SFC의 추상화에 머물러 있다.
구성 프로세스의 결과로 서비스 체인에 해당하는 정확한 SF가 인스턴스화될 수 있다.
SFC를 구성하고 물리적 자원에 매핑하는 것은 여전히 어려우며 이는 문헌에서 제안된 다른 구성 및 매핑 알고리듬에도 불구하고 그렇다.
몇 가지 기준은 SF에 대한 구성과 매핑을 어려운 문제로 만든다.
예를 들어, 서비스 제약, 실제 네트워킹 상태, 인프라 기능 및 가입자의 선호도에 기초하여 SFC를 구성하는 것은 간단한 문제가 아니다.
일부 제약 조건을 만족시키기 위해, 다른 제약 조건을 위반할 수 있다. 예를 들어, SF를 재사용하면 비용 절감을 보장할 수 있지만 경로가 더 길어질 수 있다.
또한 SFC 환경에서는 다양한 유형의 SF를 구축할 수 있다(예: 하드웨어 어플라이언스, VM 이미지, 패킷 I/O 드라이버, 컨테이너 프로세스).
이러한 이질성은 상호 운용성 제약 조건을 도입한다.
동일한 유형의 가상 SF를 배포하면 서로 다른 SF를 동일한 노드에서 결합할 수 있으므로 배포 비용을 절감할 수 있다.
이기종 시나리오에서 다른 유형의 SF를 사용하면 비용이 증가할 수 있다.
따라서, 이종 환경에서 체인의 구성도 어렵다.

2) 둘째, 서비스 체인은 고유한 경로를 사용하거나 여러 경로를 사용하여 배포할 수 있다.
관리 평면에 설정된 정책 프로필에 따라 다르다.
SFC에 대한 경로 선택 문제는 QoS 및 인프라/운영자 정책에 따라 동일한 체인에 대한 다른 경로를 선택하는 결과를 초래한다(그림 4.(c)).
실제로 경로를 구분하면 서로 다른 SFC 제약 조건을 충족할 수 있다.
예를 들어 일부 정책 프로파일의 경우 지연 시간 및 링크 대역폭 증가와 함께 비용 최소화에 우선 순위를 둘 수 있다.
다른 경우에는 VM(VNF를 내장하는 노드, 일반적으로 노드는 가상 머신) 사용량을 고려하지 않고 제공 시간이나 최단 경로를 우선시할 수 있다.
그러나 다중 기준 경로 선택은 어려운 문제이며 최단 경로 선택을 기반으로 하는 현재의 경로 선택 방법은 QoS를 보장하지 않는다.
또 다른 문제는 주어진 체인에 대해 경로가 계산되면 현재 네트워크 상태 및 환경 변화에 따라 서비스 제공 중에 실시간으로 SFP를 업데이트하기가 어렵다는 점이다.

3) 셋째, 배치 문제는 최적의 SF 위치, 즉 SF를 노드에 매핑하는 것을 목표로 한다.
목표는 높은 네트워크 성능과 효율적인 리소스 활용을 제공하는 것입니다(그림 4(b)).
SF 배치에 대한 많은 작업이 수행되었지만, 배송 시간, 발생 비용, 가입자의 선호도 및 인프라의 속성을 고려하여 배치 제약 조건을 맞춤화하기 위한 추가 연구가 필요하다.
또한 배치 알고리즘은 충돌 또는 제한 때문에 일부 SF가 동일한 노드에 공존할 수 없는 현실적인 경우를 고려해야 한다.
노드의 일부 SF를 결합하는 것이 특정 체인에 대해 최적일 수 있지만(예: 대역폭 소비) 다른 SFC에는 최적일 수 없다.
이러한 메트릭스를 고려하는 것은 배치 문제를 훨씬 더 어렵게 한다.

## 서비스 할당 및 프로비저닝
자원 할당은 여전히 NFV와 SFC의 주요 과제 중 하나이다.
그것은 배치 및 구성 문제와 직접적으로 관련이 있다(그림 4(b)).
동적 리소스 프로비저닝을 통해 필요할 때 VNF에 리소스를 할당할 수 있지만 VNF 간에 리소스를 공유해야 하는 문제가 있다.
따라서 글로벌 자원을 놓고 VNF 간 경쟁이 벌어지고 있다.
따라서 일부 VNF는 리소스가 부족하여 VNF 장애를 일으키고 궁극적으로 체인의 전체 서비스 제공에 영향을 미칠 수 있다.
허용 가능한 수준의 네트워크 성능을 보장하기 위해 리소스가 낭비되어 리소스 유휴 문제가 발생할 수 있다.
실제로 일부 SF 인스턴스는 리소스 감소로 인해 SFC 과정에서 병목 현상이 발생하는 반면, 다른 SF 인스턴스는 불필요한 리소스를 점유하면서 유휴 상태로 유지될 수 있다.
따라서 자원 활용률은 SFC 조정 및 자원 할당에서 고려되어야 한다.

## 트래픽 조정 (steering)
TC(Traffic Steering)의 문제는 주로 트래픽 포워딩 운영과 관련이 있다(그림 4.(d)).
실제로 SDN은 포워딩 유연성과 제어력을 향상시킨다.
그러나 SFC의 TS에는 여전히 관련 과제가 남아 있다.
주로 포워딩 상태의 크기(예: 모든 흐름 테이블의 흐름 항목 집합)는 포워딩 장치에 저장된 흐름 규칙의 수와 유형에 따라 달라진다.
이는 특히 메모리 용량이 제한된 디바이스에서 제한 요인이 될 수 있다.
다양한 이유로 인해, 포워딩 상태가 증가할 수 있습니다(예: 인프라 크기, 요청 수, 체인 수 및 SF). 이는 확장성 문제로 이어질 수 있다.
이 문제를 극복하기 위해 일부 SFC 솔루션은 포워딩 상태를 컨트롤러에 저장한다.
원래 OpenFlow 사양에서는 이 동작을 요구했지만 실제로는 작동하지 않는다.
그 결과, SDN 컨트롤러와 장치 간에 교환되는 제어 트래픽의 양이 증가하여 통신 오버헤드가 발생하고 처리 리소스가 낭비된다.
SFP(Service Function Path)를 적용하기 위해 TS 메서드는 패킷 헤더를 삽입, 제거 또는 수정할 수 있다.
헤더에 대한 연속적인 작업으로 인해 지연 시간과 처리 로드가 추가로 발생한다.
SFC에는 다양한 캡슐화 프로토콜이 사용될 수 있다.
캡슐화는 패킷 크기를 증가시키고 MTU 문제를 야기하는데, 주로 여러 개의 헤더가 추가되거나(예: 네트워크 및 SFC 캡슐화) 전체 SFP가 패킷에 인코딩될 때 발생한다(예: 소스 라우팅 기술).
패킷 크기는 엔드 투 엔드 배송 시간에 직관적으로 영향을 미친다.
또한 일부 암호화 프로토콜은 SF에서 지원되지 않습니다.
이 경우, 프록시는 SFC 오버레이 통신을 가능하게 하기 위해 SF와 SFF 사이에서 사용되며, 따라서 추가적인 복잡성 자원 할당과 약간의 지연을 유도한다.

SFC 트래픽 균형은 SFC 언더레이(데이터 플레인 또는 네트워크 토폴로지 및 장치)가 매우 자주 변경되는 매우 역동적인 네트워크에서 또 다른 어려운 문제이다.
더욱이 균형이 필요한 일부 SF의 경우 반환되는 트래픽은 동일한 SF 인스턴스(예: TCP 프록시, 옵티마이저)를 통과해야 하므로 인접 분류기는 역패킷이 동일한 경로를 통과하도록 보장해야 한다.
트래픽 균형을 보장하기 위한 몇 가지 솔루션이 존재하더라도 한계가 있을 수 있다.
또한 체인의 부분 균형은 아직 고려되지 않았다; 체인은 균형 또는 불균형으로 정의되지만, 사실 전체 체인 균형은 SF의 개별 균형 요건에 따라 달라진다.
일부 SF는 통과하기 위해 역방향 트래픽이 필요한 반면 다른 SF는 통과하지 않는다.
그러나 SF 균형 요구 사항 및 네트워크 변화를 고려하여 부분 균형 체인을 배치하는 것은 어렵다.

SFC 설계는 SFC 계층과 전송 계층(라우팅/포워딩 평면)을 분리한다.
이러한 분리는 운영자가 경로 식별과 메타데이터를 보존하는 네트워크의 다른 부분에서 서로 다른 전송을 사용하는 한 상호 운용성을 향상시킨다.
따라서, 전송 방식을 수정하지 않는 올바른 TS 방법의 선택은 상호 운용성에 대한 주요 보증으로 남아 있다.
예를 들어 IP와 MPLS 부분으로 구성된 이기종 네트워크에서 SFC TS 방법은 IP나 MPLS에 의존해서는 안된다.
실제로 이 경우 IP 옵션 IPv6 확장 헤더 또는 MPLS 레이블을 기반으로 하는 트래픽 조향은 권장되지 않는다.
상호 운용성을 위해 NSH와 같은 전송 독립 프로토콜을 사용할 수 있다.
서로 다른 TS 프로토콜 간 변환을 허용하는 기술이 필요하다.
저자들이 아는 한 그러한 구현은 아직 없다.

SFC는 다양한 메커니즘의 멀티 테넌트(Multi-tenant) 네트워크에 대해 지원될 수 있다.
사용된 메커니즘의 영향은 SFF의 상태 양으로 구성된다.
멀티 테넌시(Multi-tenancy)는 서로 다른 테넌트에 대해 별도의 SF와 별도의 SFP를 사용하여 지원할 수 있으며, SF가 멀티 테넌시를 지원하는 경우 테넌트 식별자를 SFC 정보(NSH 프로토콜의 경우 메타데이터)와 함께 전송할 수 있다.
다중 테넌트 네트워크에는 테넌트에 대한 약정이 있을 수 있다(예: 지연, 대역폭).
그럼에도 불구하고 테넌트에 대한 다양한 QoS 약정에 대해 또 다른 유형의 트래픽 차별화를 제공하는 것은 어렵다.
에지 정책을 결합하고 다른 DiffServ 클래스에 리소스를 제공하는 것과 같은 일부 기술을 사용할 수 있다.
